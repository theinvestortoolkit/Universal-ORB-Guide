<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal ORB Strategy Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        .tab-active {
            border-bottom: 2px solid #059669;
            color: #059669;
            font-weight: 600;
        }
        .tab-inactive {
            color: #78716c;
            border-bottom: 2px solid transparent;
        }
        .tab-inactive:hover {
            color: #44403c;
        }
        .strategy-btn.active {
            border-color: #10b981;
            background-color: #ecfdf5;
            box-shadow: 0 0 0 2px #10b981;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 antialiased selection:bg-emerald-100 selection:text-emerald-900">

    <header class="bg-white border-b border-stone-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">U</div>
                <h1 class="text-xl font-bold tracking-tight text-stone-900">Universal ORB <span class="text-stone-500 font-normal hidden sm:inline">| Interactive Strategy Guide</span></h1>
            </div>
            <div class="text-sm font-medium text-stone-500">v1.0</div>
        </div>
    </header>

    <nav class="bg-white border-b border-stone-200 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8 overflow-x-auto no-scrollbar" aria-label="Tabs">
                <button onclick="switchTab('visuals')" id="tab-visuals" class="tab-active py-4 px-1 text-sm whitespace-nowrap transition-colors cursor-pointer">1. Visual Legend</button>
                <button onclick="switchTab('strategies')" id="tab-strategies" class="tab-inactive py-4 px-1 text-sm whitespace-nowrap transition-colors cursor-pointer">2. Entry Strategies</button>
                <button onclick="switchTab('risk')" id="tab-risk" class="tab-inactive py-4 px-1 text-sm whitespace-nowrap transition-colors cursor-pointer">3. Risk & Sizing</button>
                <button onclick="switchTab('context')" id="tab-context" class="tab-inactive py-4 px-1 text-sm whitespace-nowrap transition-colors cursor-pointer">4. Context & Settings</button>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen">

        <section id="content-visuals" class="space-y-8">
            <div class="max-w-3xl">
                <h2 class="text-2xl font-bold text-stone-900 mb-2">Decoding the Chart Visuals</h2>
                <p class="text-stone-600 leading-relaxed">
                    This section introduces the core "anchors" of the indicator. Each line represents a major psychological level where institutional supply or demand is expected. Toggle the legend below to learn the significance of each level.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-stone-200 p-6">
                    <div class="chart-container">
                        <canvas id="legendChart"></canvas>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="bg-white rounded-xl shadow-sm border border-stone-200 p-5">
                        <h3 class="font-semibold text-stone-900 mb-3 border-b border-stone-100 pb-2">Level Explanations</h3>
                        <div id="legend-details" class="min-h-[100px]">
                            <p class="text-sm text-stone-500 italic">Select a line from the legend below the chart to see its definition.</p>
                        </div>
                    </div>
                    <div class="bg-emerald-50 rounded-xl p-5 border border-emerald-100">
                        <p class="text-emerald-700 text-sm leading-snug">
                            <strong>Note:</strong> The Gray Box indicates the "Opening Range." Price action inside this zone is considered noise until a breakout occurs.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="content-strategies" class="hidden space-y-8">
            <div class="max-w-3xl">
                <h2 class="text-2xl font-bold text-stone-900 mb-2">Entry Strategy Playbook</h2>
                <p class="text-stone-600 leading-relaxed">
                    There are four primary ways to enter an ORB trade. Select a type to simulate the price movement and see the logic behind the entry.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <div class="lg:col-span-4 flex flex-col space-y-3">
                    <button onclick="setStrategy(0)" id="btn-strat-0" class="strategy-btn active text-left p-4 rounded-xl border border-stone-200 bg-white transition-all">
                        <span class="block font-bold text-emerald-600">Type 1: Confirmed Breakout</span>
                        <span class="text-xs text-stone-500">Wait for candle close. Safest entry.</span>
                    </button>
                    <button onclick="setStrategy(1)" id="btn-strat-1" class="strategy-btn text-left p-4 rounded-xl border border-stone-200 bg-white transition-all">
                        <span class="block font-bold text-amber-600">Type 2: Aggressive Wick</span>
                        <span class="text-xs text-stone-500">Enter on touch. High momentum.</span>
                    </button>
                    <button onclick="setStrategy(2)" id="btn-strat-2" class="strategy-btn text-left p-4 rounded-xl border border-stone-200 bg-white transition-all">
                        <span class="block font-bold text-blue-600">Type 3: The Retest</span>
                        <span class="text-xs text-stone-500">Wait for pullback. Best Risk:Reward.</span>
                    </button>
                    <button onclick="setStrategy(3)" id="btn-strat-3" class="strategy-btn text-left p-4 rounded-xl border border-stone-200 bg-white transition-all">
                        <span class="block font-bold text-purple-600">Type 4: Mid-Line Bounce</span>
                        <span class="text-xs text-stone-500">Support at equilibrium. Trend defense.</span>
                    </button>
                </div>

                <div class="lg:col-span-8 bg-white rounded-xl shadow-sm border border-stone-200 p-6">
                    <div id="strat-description" class="mb-6 p-4 rounded-lg bg-stone-50 border-l-4 border-stone-300">
                        <h3 class="font-bold text-stone-900" id="strat-title">Loading...</h3>
                        <p class="text-sm text-stone-600 mt-1" id="strat-desc"></p>
                    </div>
                    <div class="chart-container">
                        <canvas id="strategyChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="content-risk" class="hidden space-y-8">
            <div class="max-w-3xl">
                <h2 class="text-2xl font-bold text-stone-900 mb-2">Position Sizing & Risk</h2>
                <p class="text-stone-600 leading-relaxed">
                    Math is your edge. Use this calculator to determine exactly how many shares to buy so that your loss is capped if the trade fails.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-sm border border-stone-200 p-6">
                    <h3 class="font-bold text-stone-800 mb-6">Calculator</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1">Account Balance ($)</label>
                            <input type="number" id="accountSize" value="10000" class="w-full p-3 bg-stone-50 border border-stone-200 rounded-lg outline-none focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1">Risk %</label>
                                <input type="number" id="riskPercent" value="1" step="0.1" class="w-full p-3 bg-stone-50 border border-stone-200 rounded-lg outline-none focus:ring-2 focus:ring-emerald-500">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-stone-500 uppercase tracking-wider mb-1">Stop Dist. ($)</label>
                                <input type="number" id="stopDistance" value="0.50" step="0.01" class="w-full p-3 bg-stone-50 border border-stone-200 rounded-lg outline-none focus:ring-2 focus:ring-emerald-500">
                            </div>
                        </div>
                        <div class="pt-6 border-t border-stone-100 flex justify-between items-center">
                            <div>
                                <p class="text-xs text-stone-400">Cash Risk</p>
                                <p class="text-2xl font-bold text-rose-600" id="riskAmount">$100.00</p>
                            </div>
                            <div class="text-right">
                                <p class="text-xs text-stone-400">Position Size</p>
                                <p class="text-2xl font-bold text-stone-900" id="positionSize">200</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-stone-100 rounded-xl p-6 border border-stone-200 flex flex-col justify-center">
                    <h4 class="font-bold text-stone-900 mb-4">Exit Rule Priority</h4>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="w-6 h-6 bg-emerald-100 text-emerald-600 rounded flex items-center justify-center font-bold text-xs mr-3 mt-0.5">1</span>
                            <p class="text-sm"><strong>Initial Stop:</strong> Always placed at the Mid-line (Blue) or opposite end (Red/Green).</p>
                        </li>
                        <li class="flex items-start">
                            <span class="w-6 h-6 bg-purple-100 text-purple-600 rounded flex items-center justify-center font-bold text-xs mr-3 mt-0.5">2</span>
                            <p class="text-sm"><strong>Profit Target:</strong> Exit 50% at Previous Day High (PDH) or Low (PDL).</p>
                        </li>
                        <li class="flex items-start">
                            <span class="w-6 h-6 bg-teal-100 text-teal-600 rounded flex items-center justify-center font-bold text-xs mr-3 mt-0.5">3</span>
                            <p class="text-sm"><strong>The Runner:</strong> Let the remainder ride to Weekly High (PWH) or market close.</p>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="content-context" class="hidden space-y-8">
            <div class="max-w-3xl">
                <h2 class="text-2xl font-bold text-stone-900 mb-2">Timeframes & No-Trade Conditions</h2>
                <p class="text-stone-600 leading-relaxed">The quality of the ORB signal depends heavily on the timeframe used and the market's current volatility context.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-xl border border-stone-200">
                    <div class="font-bold text-emerald-600 mb-2 uppercase text-xs tracking-widest">Standard</div>
                    <h4 class="text-lg font-bold mb-2">15-Min Range</h4>
                    <p class="text-sm text-stone-600">The industry standard. Filters out opening wicks and allows algorithmic "washouts" to complete before establishing direction.</p>
                </div>
                <div class="bg-white p-6 rounded-xl border border-stone-200">
                    <div class="font-bold text-amber-600 mb-2 uppercase text-xs tracking-widest">Aggressive</div>
                    <h4 class="text-lg font-bold mb-2">5-Min Range</h4>
                    <p class="text-sm text-stone-600">Best for highly liquid tickers (SPY, TSLA) or Crypto. Fast entry, but requires tighter risk management for fake-outs.</p>
                </div>
                <div class="bg-white p-6 rounded-xl border border-stone-200">
                    <div class="font-bold text-blue-600 mb-2 uppercase text-xs tracking-widest">Conservative</div>
                    <h4 class="text-lg font-bold mb-2">30-Min Range</h4>
                    <p class="text-sm text-stone-600">Highest conviction. If a 30-minute range breaks, the trend often holds for the entire afternoon session.</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-900 text-stone-500 py-12 mt-12 border-t border-stone-800 text-center">
        <p class="text-sm font-medium">Universal ORB Professional Dashboard</p>
        <p class="text-xs mt-1">Single-Page Interactive Application v1.0</p>
    </footer>

    <script>
        // --- Navigation ---
        function switchTab(tabId) {
            document.querySelectorAll('button[id^="tab-"]').forEach(btn => {
                btn.className = 'tab-inactive py-4 px-1 text-sm whitespace-nowrap transition-colors cursor-pointer';
            });
            document.getElementById(`tab-${tabId}`).className = 'tab-active py-4 px-1 text-sm whitespace-nowrap transition-colors cursor-pointer';
            ['visuals', 'strategies', 'risk', 'context'].forEach(id => {
                document.getElementById(`content-${id}`).classList.toggle('hidden', id !== tabId);
            });
        }

        // --- Visual Legend Chart ---
        const legendCtx = document.getElementById('legendChart').getContext('2d');
        const legendInfo = {
            1: { title: "PDH (Purple)", desc: "Previous Day High. Represents the maximum price from yesterday. A key target for long trades." },
            2: { title: "OR High (Green)", desc: "Opening Range High. The ceiling of the initial morning volatility. Breaking this triggers bullish momentum." },
            3: { title: "OR Mid (Blue)", desc: "The Equilibrium. 50% of the opening range. If price stays above this, the bias remains bullish." },
            4: { title: "OR Low (Red)", desc: "Opening Range Low. The floor of the morning. Breaking below this triggers bearish momentum." }
        };

        const legendChart = new Chart(legendCtx, {
            type: 'line',
            data: {
                labels: ['9:30', '9:35', '9:40', '9:45', '9:50', '9:55', '10:00'],
                datasets: [
                    { label: 'Price', data: [100, 102, 101, 103, 105, 104, 106], borderColor: '#57534e', borderWidth: 2, pointRadius: 0, tension: 0.4 },
                    { label: 'PDH', data: [108, 108, 108, 108, 108, 108, 108], borderColor: '#9333ea', borderDash: [5,5], pointRadius: 0 },
                    { label: 'OR High', data: [105, 105, 105, 105, 105, 105, 105], borderColor: '#10b981', pointRadius: 0 },
                    { label: 'OR Mid', data: [102.5, 102.5, 102.5, 102.5, 102.5, 102.5, 102.5], borderColor: '#3b82f6', pointRadius: 0 },
                    { label: 'OR Low', data: [100, 100, 100, 100, 100, 100, 100], borderColor: '#f43f5e', pointRadius: 0 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', onClick: (e, legendItem, legend) => {
                        const index = legendItem.datasetIndex;
                        const ci = legend.chart;
                        ci.isDatasetVisible(index) ? ci.hide(index) : ci.show(index);
                        const detail = legendInfo[index];
                        if(detail) document.getElementById('legend-details').innerHTML = `<h5 class='font-bold text-stone-800'>${detail.title}</h5><p class='text-sm text-stone-600 mt-1'>${detail.desc}</p>`;
                    }}
                },
                scales: { y: { display: false }, x: { grid: { display: false } } }
            }
        });

        // --- Strategy Simulator Chart ---
        const stratCtx = document.getElementById('strategyChart').getContext('2d');
        const strategyData = [
            { title: "Type 1: Confirmed Breakout", desc: "Notice the candle close firmly above the Green line. This confirms that buyers have full control before you enter.", data: [100, 102, 101, 103, 105.5, 107, 108] },
            { title: "Type 2: Aggressive Wick", desc: "Entry triggered the moment price touches the Green line. Fast, but higher risk of a 'fake-out' wick.", data: [100, 101, 105.1, 105.5, 106, 108, 109] },
            { title: "Type 3: The Retest", desc: "Price breaks out, then returns to 'test' the Green line. This is the highest conviction entry point.", data: [100, 106, 107, 105.2, 105.1, 108, 110] },
            { title: "Type 4: Mid-Line Bounce", desc: "Price pulls back deep into the range but finds support at the Blue Mid-line. Defends the 50% fair value.", data: [100, 106, 107, 103, 102.6, 104, 106] }
        ];

        let strategyChart = new Chart(stratCtx, {
            type: 'line',
            data: {
                labels: ['1', '2', '3', '4', '5', '6', '7'],
                datasets: [
                    { label: 'Price', data: strategyData[0].data, borderColor: '#57534e', tension: 0.3, pointRadius: 3 },
                    { label: 'OR High', data: Array(7).fill(105), borderColor: '#10b981', pointRadius: 0 },
                    { label: 'OR Mid', data: Array(7).fill(102.5), borderColor: '#3b82f6', borderDash: [4,4], pointRadius: 0 }
                ]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });

        function setStrategy(idx) {
            document.querySelectorAll('.strategy-btn').forEach((b, i) => b.classList.toggle('active', i === idx));
            document.getElementById('strat-title').innerText = strategyData[idx].title;
            document.getElementById('strat-desc').innerText = strategyData[idx].desc;
            strategyChart.data.datasets[0].data = strategyData[idx].data;
            strategyChart.update();
        }
        setStrategy(0);

        // --- Calculator ---
        function calc() {
            const acc = parseFloat(document.getElementById('accountSize').value) || 0;
            const riskP = parseFloat(document.getElementById('riskPercent').value) || 0;
            const dist = parseFloat(document.getElementById('stopDistance').value) || 0;
            const riskAmt = acc * (riskP / 100);
            document.getElementById('riskAmount').innerText = `$${riskAmt.toFixed(2)}`;
            document.getElementById('positionSize').innerText = dist > 0 ? Math.floor(riskAmt / dist).toLocaleString() : 0;
        }
        ['accountSize', 'riskPercent', 'stopDistance'].forEach(id => document.getElementById(id).addEventListener('input', calc));
        calc();
    </script>
</body>
</html>